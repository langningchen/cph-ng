# 加载测试用例

从 zip 文件或文件夹导入测试用例。

## 概述

加载测试用例功能允许您一次从外部源导入多个测试用例。它支持从 zip 压缩包或目录文件夹加载，自动匹配输入（.in）文件与答案（.out、.ans）文件。

## 用户交互

### 触发功能

**方法：侧边栏按钮**
- 点击题目操作面板中的文件夹/文件复制图标按钮
- 位于题目标题下方从左数第二个按钮

### UI 组件

按钮属性：
- 图标：文件/文件夹图标
- 标签：本地化的"加载测试用例"文本
- 位置：操作面板从左数第二个按钮

## 内部操作

### 工作原理

加载过程遵循以下步骤：

1. **源选择**：显示带有选项的对话框：
   - 从 zip 文件加载
   - 从文件夹加载

2. **文件/文件夹选择**：
   - 对于 zip：提示用户选择 zip 文件
   - 对于文件夹：提示用户选择目录
   - Zip 文件被提取到临时文件夹

3. **测试用例发现**：
   - 递归扫描所选位置中的所有文件
   - 按名称匹配 `.in` 文件与相应的 `.out` 或 `.ans` 文件
   - 自然排序测试用例（test1、test2、test10 等）

4. **测试用例选择**：
   - 在选择对话框中显示所有发现的测试用例
   - 为每个用例显示输入和答案文件路径
   - 用户可以选择要导入的用例

5. **导入**：
   - 将选定的测试用例添加到题目
   - 可选地先清除现有测试用例（基于设置）
   - 更新 UI 以显示导入的用例

## 配置选项

此功能受多个设置影响：

- **文件夹选择**：选择文件夹选择器的工作方式  
  → 查看[基本设置](../configuration/basic.md#folder-selection)

- **Zip 处理**：控制 zip 解压位置以及是否删除  
  → 查看[题目设置](../configuration/problem.md#test-case-loading)

- **测试用例清除**：选择是保留还是替换现有测试用例  
  → 查看[题目设置](../configuration/problem.md#test-case-loading)

## 工作流程示例

### 从 Zip 加载

1. 点击加载测试用例按钮
2. 选择"从 zip 文件加载"
3. 从文件系统选择 zip 文件
4. Zip 解压到 `.cph-ng/{zipname}/`
5. 显示找到的测试用例
6. 选择要导入的用例
7. 测试用例添加到题目

### 从文件夹加载

1. 点击加载测试用例按钮
2. 选择"从文件夹加载"
3. 选择包含测试文件的文件夹
4. 扫描文件以查找 `.in`/`.out` 对
5. 在选择对话框中显示匹配的对
6. 选择要导入的测试用例
7. 测试用例添加到题目

## 相关功能

- [添加测试用例](add-test-case.md) - 手动添加单个用例
- [编辑测试用例](edit-test-case.md) - 修改导入的用例
- [切换文件/内联](toggle-file-inline.md) - 切换数据存储模式

## 文件匹配规则

CPH-NG 通过基本名称匹配输入和答案文件：

**输入文件**：必须具有 `.in` 扩展名（例如，`test1.in`、`sample01.in`）
**答案文件**：可以具有 `.out` 或 `.ans` 扩展名（例如，`test1.out`、`sample01.ans`）
**匹配**：`test1.in` 与 `test1.out` 或 `test1.ans` 匹配

没有匹配的文件仍然被导入（仅输入，没有预期答案）。
