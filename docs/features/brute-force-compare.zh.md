# 暴力对拍

使用生成器、暴力解法和优化解法比较自动查找边界情况。

## 概述

暴力对拍功能通过自动生成测试输入、运行您的优化解法和暴力参考解法，并比较它们的输出来帮助发现边界情况和错误。当输出不同时，该测试用例将被保存以供调试。

## 用户交互

### 触发功能

**方法：暴力对拍按钮**
- 点击题目操作面板中的暴力对拍/比较箭头图标
- 打开配置对话框
- 开始比较过程

### 前置条件

- 必须已加载题目
- 需要三个程序：
  - **生成器**：创建随机测试输入
  - **暴力解法**：慢但正确的解法
  - **您的解法**：要验证的快速解法

### UI 组件

**暴力对拍对话框**：
- 生成器程序选择
- 暴力解法选择
- 配置选项（迭代次数、限制）
- 开始/停止按钮
- 进度显示
- 结果摘要

## 内部操作

### 工作原理

1. **设置**：
   - 用户选择生成器程序
   - 用户选择暴力解法
   - 配置迭代限制

2. **比较循环**：
   - 生成器创建随机输入
   - 两个解法使用相同输入运行
   - 比较输出
   - 如果不同，发现不匹配
   - 循环继续直到不匹配或达到限制

3. **结果处理**：
   - 如果发现不匹配：
     - 输入保存为新测试用例
     - 保存两个输出
     - 通知用户
   - 如果全部匹配：
     - "未发现差异"消息

4. **测试用例创建**：
   - 失败的输入添加到测试用例
   - 来自暴力解法的预期答案
   - 可以像正常测试一样调试

### 生成器要求

生成器程序应该：
- 将有效测试输入输出到 stdout
- 生成随机/多样化的输入
- 快速运行（在时间限制内）
- 本身不需要输入

### 暴力解法要求

暴力解法应该：
- 从 stdin 读取输入
- 将正确答案输出到 stdout
- 验证正确（即使很慢）
- 处理与主解法相同的输入格式

## 配置选项

此功能需要特定设置：

- **时间限制**：控制生成器和暴力解法可以运行多长时间  
  → 查看[暴力对拍设置](../configuration/brute-force.md)

- **编译**：影响所有三个程序的编译  
  → 查看[编译设置](../configuration/compilation.md)

- **运行器**：您的主解法使用标准运行器设置  
  → 查看[运行器设置](../configuration/runner.md)

## 工作流程示例

### 查找边界情况

1. 编写优化解法（可能有错误）
2. 编写简单暴力解法（慢但正确）
3. 编写生成器（创建随机输入）
4. 打开暴力对拍对话框
5. 选择生成器程序
6. 选择暴力解法程序
7. 设置迭代限制（例如，1000）
8. 点击"开始"
9. 系统运行比较
10. 347 次迭代后，发现不匹配
11. 使用失败的输入自动创建测试用例
12. 使用该测试用例进行调试

### 典型生成器示例（Python）

```python
import random
n = random.randint(1, 100)
print(n)
for i in range(n):
    print(random.randint(1, 1000))
```

### 典型暴力解法（Python）

```python
n = int(input())
arr = list(map(int, input().split()))
# 简单的 O(n²) 解法
result = 0
for i in range(n):
    for j in range(i+1, n):
        if arr[i] > arr[j]:
            result += 1
print(result)
```

### 未发现不匹配时

1. 运行 10000 次迭代
2. 所有输出匹配
3. 高度确信解法正确
4. 或生成器未很好地覆盖边界情况

## 相关功能

- [运行单个测试](run-single-test.md) - 测试找到的边界情况
- [添加测试用例](add-test-case.md) - 如需要手动添加用例
- [特殊评测](special-judge.md) - 替代验证方法
