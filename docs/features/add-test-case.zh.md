# 添加测试用例

手动为当前题目添加单个测试用例。

## 概述

添加测试用例功能会创建一个新的空测试用例，可以填入输入数据和预期答案。这对于手动创建自定义测试用例很有用。

## 用户交互

### 触发功能

**方法：侧边栏按钮**
- 点击题目操作面板中的加号（`+`）图标按钮
- 位于题目标题下方最左侧的按钮

### 前置条件

- 当前文件必须已加载题目
- 源文件必须在编辑器中处于活动状态

### UI 组件

按钮属性：
- 图标：加号（+）图标
- 标签：本地化的"添加测试用例"文本
- 大小：大按钮
- 位置：操作面板第一个按钮（最左侧）

## 内部操作

### 工作原理

扩展在添加测试用例时执行以下步骤：

1. **获取题目**：获取当前活动的题目
2. **创建测试用例**：初始化一个新的空测试用例对象
3. **添加到题目**：将测试用例追加到题目的测试用例数组中
4. **更新 UI**：刷新界面以显示新测试用例

### 测试用例结构

新测试用例初始化为：
- `stdin.useFile`：`false`（内联数据模式）
- `stdin.data`：`''`（空字符串）
- `answer.useFile`：`false`（内联数据模式）
- `answer.data`：`''`（空字符串）
- `isExpand`：`false`（折叠视图）

### 消息流程

当点击添加测试用例按钮时：
1. Webview 向扩展发送 `addTc` 消息
2. 扩展处理程序接收消息
3. 题目管理器添加新测试用例
4. UI 更新以反映更改

## 配置选项

此功能没有特定的配置设置。测试用例数据根据以下规则存储：

- **数据存储**：控制文件与内联存储模式  
  → 查看[切换文件/内联](toggle-file-inline.md)功能

- **题目数据**：题目文件存储位置  
  → 查看[题目设置](../configuration/problem.md#file-paths)

## 工作流程示例

### 基本用法

1. 打开带有现有题目的题目面板
2. 点击操作面板中的 `+` 图标
3. 新测试用例以折叠状态出现在测试用例列表底部
4. 点击展开测试用例
5. 在"输入"字段中输入输入数据
6. 在"答案"字段中输入预期答案
7. 数据在失去焦点/更改时自动保存

### 多个测试用例

- 测试用例数量没有限制
- 每个都有顺序索引（#1、#2、#3 等）
- 可以在 UI 中手动重新排序
- 可以单独删除

## 相关功能

- [编辑测试用例](edit-test-case.md) - 创建后修改测试用例
- [加载测试用例](load-test-cases.md) - 从文件批量导入
- [删除测试用例](delete-test-case.md) - 删除测试用例
- [运行单个测试用例](run-single-test.md) - 执行测试
