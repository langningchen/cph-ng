# 切换文件/内联

在文件存储和内联显示模式之间切换测试用例数据。

## 概述

切换文件/内联功能允许您更改测试用例数据的存储和显示方式。小数据可以内联显示以便于查看和编辑，而大数据可以存储在外部文件中以获得更好的性能。

## 用户交互

### 触发功能

**方法：切换按钮**
- 展开测试用例
- 找到文件/内联切换图标（通常靠近输入或答案字段）
- 点击以在模式之间切换：
  - **内联 → 文件**：将数据保存到外部文件
  - **文件 → 内联**：从文件加载数据到内联编辑器

### 前置条件

- 必须已加载题目
- 测试用例必须存在
- 对于内联模式：数据大小应在限制内

### UI 组件

**切换图标**：
- 文件图标：指示数据处于文件模式
- 内联图标：指示数据处于内联模式
- 点击以在模式之间切换

**大数据警告**：
- 如果文件数据非常大，转换为内联前会显示警告
- 用户可以继续或取消

## 内部操作

### 工作原理

**切换到文件模式**：
1. 用户点击内联数据的切换按钮
2. 从内联字段提取数据
3. 生成唯一文件名
4. 将数据写入文件
5. 更新测试用例以引用文件
6. UI 显示文件图标和文件名

**切换到内联模式**：
1. 用户点击文件数据的切换按钮
2. 根据限制检查文件大小
3. 如果太大，显示警告
4. 如果用户继续或大小正常，读取文件
5. 将数据加载到内联字段
6. 更新测试用例为内联模式
7. UI 显示可编辑文本字段

### 文件命名

文件系统命名：
- 输入文件：`input_{index}.txt` 或类似
- 答案文件：`answer_{index}.txt` 或类似
- 存储在缓存或题目特定文件夹中

## 配置选项

### 大小限制

#### `cph-ng.problem.maxInlineDataLength`
- **类型**：`number`
- **默认值**：`65536`（字节）
- **说明**：内联数据的最大大小
- **警告**：尝试内联更大的数据会显示警告

#### `cph-ng.runner.stdoutThreshold`
- **类型**：`number`
- **默认值**：`65536`（字节）
- **说明**：输出大小阈值（类似概念）

## 何时使用每种模式

### 使用内联模式：
- 小测试输入/输出
- 经常编辑的数据
- 快速查看和修改
- 您想一目了然看到的测试用例

### 使用文件模式：
- 大测试数据（> 64KB）
- 二进制或特殊字符数据
- 性能优化
- 很少更改的数据

## 工作流程示例

### 将大数据转换为文件

1. 测试用例的输入内联很长
2. UI 很慢或混乱
3. 点击切换按钮
4. 数据自动保存到文件
5. UI 现在只显示文件名
6. 仍然可以正常运行测试

### 加载文件数据以快速编辑

1. 测试用例输入处于文件模式
2. 需要快速编辑一个值
3. 点击切换按钮
4. 如果数据不太大，加载内联
5. 直接在 UI 中编辑
6. 更改保存到题目

### 处理大文件警告

1. 点击大文件的切换
2. 出现警告："文件非常大（800KB）"
3. 选项："是"继续或"取消"
4. 如果是：数据加载内联（可能很慢）
5. 如果取消：保持文件模式

## 相关功能

- [编辑测试用例](edit-test-case.md) - 在任一模式下编辑数据
- [加载测试用例](load-test-cases.md) - 导入的数据模式取决于大小
- [添加测试用例](add-test-case.md) - 新用例以内联模式开始
